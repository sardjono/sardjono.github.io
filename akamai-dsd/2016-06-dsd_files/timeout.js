(function(){if(typeof YAHOO!="undefined"){function a(){if(!aka_timeout_attrs||!aka_timeout_attrs.username){return}var k=60,f=(aka_timeout_attrs.timeoutDuration||30)*60,r=(aka_timeout_attrs.logoutTimer||5)*60,q,g,p,h,i,o=YAHOO.util.Event,b=aka_timeout_attrs.username;function n(){g=setTimeout(n,k*1000)}function e(){c();clearTimeout(q);q=setTimeout(d,(f-r)*1000)}function m(){clearTimeout(p);p=setTimeout(l,r*1000)}function l(){h.destroy();j()}function d(){YAHOO.util.Connect.asyncRequest("GET","/core/services/session/"+b+"/warn",{success:function(w){var s=JSON.parse(w.responseText);if(s&&s.status=="OK"){var v=aka_timeout_attrs.localizedText,u,t;clearTimeout(g);o.removeListener(document.body,"mousemove",e);o.removeListener(document.body,"keydown",e);o.removeListener(document.body,"click",e);h=new YAHOO.widget.SimpleDialog("timeoutdlg",{width:"30em",fixedcenter:true,modal:true,visible:true,draggable:false,close:false,underlay:"none"});h.setHeader(v.title);h.setBody(v.content);u=function(){c();o.on(document.body,"mousemove",e);o.on(document.body,"keydown",e);o.on(document.body,"click",e);this.destroy()};t=[{text:v.buttonText,cls:"akam-button",handler:u,isDefault:true}];h.cfg.setProperty("icon",YAHOO.widget.SimpleDialog.ICON_WARN);h.cfg.queueProperty("buttons",t);h.render(document.body);h.cfg.setProperty("zIndex",250000);YAHOO.util.Dom.addClass(h.getButtons()[0],"akam-submit");m()}else{clearTimeout(q);q=setTimeout(d,(f-r)*1000);if(h){h.destroy()}}},failure:function(){clearTimeout(q);q=setTimeout(d,(f-r)*1000);if(h){h.destroy()}}})}function c(){if(new Date().getTime()>=i){i=new Date().getTime()+k*1000;clearTimeout(p);if(b!==null){YAHOO.util.Connect.asyncRequest("GET","/core/services/session/"+b+"/extend",{failure:function(){clearTimeout(q);q=setTimeout(d,(f-r)*1000);if(h){h.destroy()}}})}}}function j(){if(b!==null){YAHOO.util.Connect.asyncRequest("GET","/core/services/session/"+b+"/invalidate",{success:function(){window.location="/EdgeAuth/login.jsp?reason=timeout"},failure:function(){clearTimeout(q);q=setTimeout(d,(f-r)*1000);if(h){h.destroy()}}})}}o.on(document.body,"mousemove",e);o.on(document.body,"keydown",e);o.on(document.body,"click",e);e();i=new Date().getTime()+k*1000;g=setTimeout(n,k*1000)}YAHOO.util.Event.onDOMReady(a,this,true)}})();